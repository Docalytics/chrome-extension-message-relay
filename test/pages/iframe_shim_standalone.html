<!doctype html>

<html lang="en">
<body>
<!-- Setup relay initially -->
<script type="module">
    import {relay} from '../message_relay.build.module.js'
    const RELAY = relay('dev', 'iframe_shim', true);
    RELAY.setComponentEnvData({
        foo: "bar",
        biz: "baz"
    });
    RELAY.registerComponentInitializedCb((compName, iframe, iframeWin) => {
        console.log("Component Initialized:", compName, iframe, iframeWin)
    })

    setTimeout(() => {
        // RELAY.componentSend('allComponents.preReady', {data:'foo'});
    }, 500);

    /*
    RELAY.componentOn('component1.test', 'ComponentOne', (data) => {
        const info = RELAY.getLastMsg()
        console.log("FROM COMPONENT", data, info);
        // respond to JUST that component
        RELAY.componentRespond('component1.testResponse', {it:'worked'});
        RELAY.componentSend('filteredComponentOne', {1:'2'}, 'ComponentOne'); // send message specifically to iframe component 1
    });
     */

</script>
<iframe src="iframe.html#shim" style="width:100%; border:0; padding:0; margin:0;height: 350px;"></iframe>
</body>
</html>
